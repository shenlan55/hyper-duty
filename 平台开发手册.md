# Hyper Duty 开发手册

## 1. 项目概述

Hyper Duty是一个基于前后端分离架构的企业级人员管理系统，使用Spring Boot 3.x + Vue 3开发，提供部门管理、人员管理、用户认证、系统权限管理、操作日志管理和定时任务管理等平台功能，以及值班管理等业务功能。

### 1.1 技术栈

| 分类 | 技术 | 版本 | 说明 |
|------|------|------|------|
| 后端框架 | Spring Boot | 3.1.0 | 企业级Java开发框架 |
| 前端框架 | Vue | 3.5.24 | 渐进式JavaScript框架 |
| 持久层 | MyBatis Plus | 3.5.6 | MyBatis增强工具 |
| 数据库 | MySQL | 8.0+ | 关系型数据库 |
| 安全框架 | Spring Security | 6.1.0 | 安全认证授权框架 |
| 认证方式 | JWT | 0.12.5 | JSON Web Token |
| 任务调度 | Spring Scheduling | 6.1.0 | 定时任务调度框架 |
| 线程池 | ThreadPoolTaskExecutor | 6.1.0 | 任务执行线程池 |
| 线程调度 | ThreadPoolTaskScheduler | 6.1.0 | 定时任务调度线程池 |
| UI组件库 | Element Plus | 2.13.1 | Vue 3 UI组件库 |
| 构建工具 | Maven | 3.8.x | Java项目构建工具 |
| 前端构建 | Vite | 4.5.0 | 下一代前端构建工具 |
| HTTP客户端 | Axios | 1.13.2 | 基于Promise的HTTP客户端 |

### 1.2 项目结构

```
hyper-duty/
├── frontend/             # 前端项目
│   ├── src/              # 前端源代码
│   │   ├── api/          # API请求封装
│   │   ├── components/   # Vue组件
│   │   ├── router/       # 路由配置
│   │   ├── stores/       # Pinia状态管理
│   │   ├── utils/        # 工具函数
│   │   ├── views/        # 页面组件
│   │   ├── App.vue       # 根组件
│   │   └── main.js       # 入口文件
│   ├── package.json      # 前端依赖配置
│   └── vite.config.js    # Vite配置
└── src/                  # 后端项目
    └── main/             # 后端源代码
        ├── java/         # Java代码
        │   └── com/lasu/hyperduty/
        │       ├── aspect/       # 切面
        │       ├── common/       # 公共类
        │       ├── config/       # 配置类（新增）
        │       ├── controller/   # 控制器
        │       ├── dto/          # 数据传输对象
        │       ├── entity/       # 实体类
        │       ├── mapper/       # MyBatis映射器
        │       ├── security/     # 安全配置
        │       ├── service/      # 业务逻辑
        │       │   ├── algorithm/ # 算法实现
        │       │   └── impl/     # 业务逻辑实现
        │       ├── util/         # 工具类
        │       └── utils/        # 工具类
        └── resources/    # 资源文件
            ├── mapper/   # MyBatis XML映射文件
            ├── sql/      # SQL脚本
            └── application.yml   # 应用配置
```

  ## 1.4 系统权限管理架构

### 1.4.1 核心组件

| 组件名称 | 类型 | 说明 | 路径 |
|---------|------|------|------|
| SecurityConfig | 配置类 | Spring Security安全配置 | src/main/java/com/lasu/hyperduty/security/SecurityConfig.java |
| JwtAuthenticationFilter | 过滤器 | JWT认证过滤器 | src/main/java/com/lasu/hyperduty/security/JwtAuthenticationFilter.java |
| SysUser | 实体类 | 用户实体 | src/main/java/com/lasu/hyperduty/entity/SysUser.java |
| SysRole | 实体类 | 角色实体 | src/main/java/com/lasu/hyperduty/entity/SysRole.java |
| SysMenu | 实体类 | 菜单实体 | src/main/java/com/lasu/hyperduty/entity/SysMenu.java |
| SysUserRole | 实体类 | 用户角色关联实体 | src/main/java/com/lasu/hyperduty/entity/SysUserRole.java |
| SysRoleMenu | 实体类 | 角色菜单关联实体 | src/main/java/com/lasu/hyperduty/entity/SysRoleMenu.java |
| SysUserMapper | 映射器 | 用户数据访问 | src/main/java/com/lasu/hyperduty/mapper/SysUserMapper.java |
| SysRoleMapper | 映射器 | 角色数据访问 | src/main/java/com/lasu/hyperduty/mapper/SysRoleMapper.java |
| SysMenuMapper | 映射器 | 菜单数据访问 | src/main/java/com/lasu/hyperduty/mapper/SysMenuMapper.java |
| SysUserRoleMapper | 映射器 | 用户角色关联数据访问 | src/main/java/com/lasu/hyperduty/mapper/SysUserRoleMapper.java |
| SysRoleMenuMapper | 映射器 | 角色菜单关联数据访问 | src/main/java/com/lasu/hyperduty/mapper/SysRoleMenuMapper.java |
| SysUserService | 服务接口 | 用户管理服务 | src/main/java/com/lasu/hyperduty/service/SysUserService.java |
| SysRoleService | 服务接口 | 角色管理服务 | src/main/java/com/lasu/hyperduty/service/SysRoleService.java |
| SysMenuService | 服务接口 | 菜单管理服务 | src/main/java/com/lasu/hyperduty/service/SysMenuService.java |
| SysUserRoleService | 服务接口 | 用户角色关联服务 | src/main/java/com/lasu/hyperduty/service/SysUserRoleService.java |
| SysRoleMenuService | 服务接口 | 角色菜单关联服务 | src/main/java/com/lasu/hyperduty/service/SysRoleMenuService.java |
| SysUserServiceImpl | 服务实现 | 用户管理服务实现 | src/main/java/com/lasu/hyperduty/service/impl/SysUserServiceImpl.java |
| SysRoleServiceImpl | 服务实现 | 角色管理服务实现 | src/main/java/com/lasu/hyperduty/service/impl/SysRoleServiceImpl.java |
| SysMenuServiceImpl | 服务实现 | 菜单管理服务实现 | src/main/java/com/lasu/hyperduty/service/impl/SysMenuServiceImpl.java |
| SysUserRoleServiceImpl | 服务实现 | 用户角色关联服务实现 | src/main/java/com/lasu/hyperduty/service/impl/SysUserRoleServiceImpl.java |
| SysRoleMenuServiceImpl | 服务实现 | 角色菜单关联服务实现 | src/main/java/com/lasu/hyperduty/service/impl/SysRoleMenuServiceImpl.java |
| SysUserController | 控制器 | 用户管理API | src/main/java/com/lasu/hyperduty/controller/SysUserController.java |
| SysRoleController | 控制器 | 角色管理API | src/main/java/com/lasu/hyperduty/controller/SysRoleController.java |
| SysMenuController | 控制器 | 菜单管理API | src/main/java/com/lasu/hyperduty/controller/SysMenuController.java |
| AuthController | 控制器 | 认证API | src/main/java/com/lasu/hyperduty/controller/AuthController.java |
| auth.js | 前端API | 认证前端API | frontend/src/api/auth.js |
| user.js | 前端API | 用户管理前端API | frontend/src/api/user.js |
| role.js | 前端API | 角色管理前端API | frontend/src/api/role.js |
| menu.js | 前端API | 菜单管理前端API | frontend/src/api/menu.js |
| User.vue | 前端组件 | 用户管理页面 | frontend/src/views/User.vue |
| Role.vue | 前端组件 | 角色管理页面 | frontend/src/views/Role.vue |
| Menu.vue | 前端组件 | 菜单管理页面 | frontend/src/views/Menu.vue |
| Login.vue | 前端组件 | 登录页面 | frontend/src/views/Login.vue |

### 1.4.2 工作流程

1. **用户认证**：用户通过登录页面提交用户名和密码，AuthController验证后返回JWT令牌
2. **权限验证**：每个请求通过JwtAuthenticationFilter验证JWT令牌，获取用户信息和权限
3. **角色管理**：通过角色管理页面可以创建、编辑、删除角色，分配菜单权限和用户
4. **菜单管理**：通过菜单管理页面可以创建、编辑、删除菜单，配置菜单权限
5. **用户管理**：通过用户管理页面可以创建、编辑、删除用户，分配角色

### 1.4.3 权限控制机制

- **基于角色的权限控制（RBAC）**：通过角色分配菜单权限，用户通过角色获取权限
- **JWT令牌认证**：使用无状态的JWT令牌进行身份验证
- **URL权限控制**：通过SecurityConfig配置URL访问权限
- **方法权限控制**：使用@PreAuthorize注解控制方法访问权限

## 1.5 操作日志管理架构

### 1.5.1 核心组件

| 组件名称 | 类型 | 说明 | 路径 |
|---------|------|------|------|
| OperationLogAspect | 切面 | 操作日志记录切面 | src/main/java/com/lasu/hyperduty/aspect/OperationLogAspect.java |
| OperationLog | 实体类 | 操作日志实体 | src/main/java/com/lasu/hyperduty/entity/OperationLog.java |
| OperationLogMapper | 映射器 | 操作日志数据访问 | src/main/java/com/lasu/hyperduty/mapper/OperationLogMapper.java |
| OperationLogService | 服务接口 | 操作日志服务 | src/main/java/com/lasu/hyperduty/service/OperationLogService.java |
| OperationLogServiceImpl | 服务实现 | 操作日志服务实现 | src/main/java/com/lasu/hyperduty/service/impl/OperationLogServiceImpl.java |
| OperationLogController | 控制器 | 操作日志API | src/main/java/com/lasu/hyperduty/controller/OperationLogController.java |
| operationLog.js | 前端API | 操作日志前端API | frontend/src/api/duty/operationLog.js |
| OperationLog.vue | 前端组件 | 操作日志管理页面 | frontend/src/views/duty/OperationLog.vue |

### 1.5.2 工作流程

1. **日志记录**：通过OperationLogAspect切面拦截Controller方法，自动记录操作日志
2. **日志存储**：操作日志存储到operation_log表中，包含操作人、操作类型、操作模块、操作描述等信息
3. **日志查询**：通过前端页面可以查询、筛选操作日志，支持按操作人、操作类型、操作模块、时间范围等条件查询
4. **日志审计**：操作日志用于系统审计，追踪用户操作行为

### 1.5.3 日志记录内容

- **操作人信息**：操作人ID、操作人姓名
- **操作详情**：操作类型、操作模块、操作描述
- **请求信息**：请求方法、请求URL、请求参数
- **响应信息**：响应结果、执行时间、状态
- **环境信息**：IP地址、用户代理

## 1.3 定时任务管理系统架构

### 1.3.1 核心组件

| 组件名称 | 类型 | 说明 | 路径 |
|---------|------|------|------|
| ThreadPoolConfig | 配置类 | 线程池配置，负责创建和配置线程池 | src/main/java/com/lasu/hyperduty/config/ThreadPoolConfig.java |
| ScheduleConfig | 配置类 | 基于SchedulingConfigurer的动态任务配置 | src/main/java/com/lasu/hyperduty/config/ScheduleConfig.java |
| SysScheduleJob | 实体类 | 定时任务实体 | src/main/java/com/lasu/hyperduty/entity/SysScheduleJob.java |
| SysScheduleLog | 实体类 | 定时任务日志实体 | src/main/java/com/lasu/hyperduty/entity/SysScheduleLog.java |
| SysScheduleJobMapper | 映射器 | 定时任务数据访问 | src/main/java/com/lasu/hyperduty/mapper/SysScheduleJobMapper.java |
| SysScheduleLogMapper | 映射器 | 定时任务日志数据访问 | src/main/java/com/lasu/hyperduty/mapper/SysScheduleLogMapper.java |
| SysScheduleJobService | 服务接口 | 定时任务服务 | src/main/java/com/lasu/hyperduty/service/SysScheduleJobService.java |
| SysScheduleLogService | 服务接口 | 定时任务日志服务 | src/main/java/com/lasu/hyperduty/service/SysScheduleLogService.java |
| SysScheduleJobServiceImpl | 服务实现 | 定时任务服务实现 | src/main/java/com/lasu/hyperduty/service/impl/SysScheduleJobServiceImpl.java |
| SysScheduleLogServiceImpl | 服务实现 | 定时任务日志服务实现 | src/main/java/com/lasu/hyperduty/service/impl/SysScheduleLogServiceImpl.java |
| HolidayTaskExecutor | 任务执行器 | 节假日信息获取任务 | src/main/java/com/lasu/hyperduty/service/impl/HolidayTaskExecutor.java |
| HolidayUtil | 工具类 | 节假日信息工具 | src/main/java/com/lasu/hyperduty/util/HolidayUtil.java |
| ScheduleJobController | 控制器 | 定时任务API | src/main/java/com/lasu/hyperduty/controller/SysScheduleJobController.java |
| scheduleJob.js | 前端API | 定时任务前端API | frontend/src/api/system/scheduleJob.js |
| ScheduleJob.vue | 前端组件 | 定时任务管理页面 | frontend/src/views/system/ScheduleJob.vue |

### 1.3.2 工作流程

1. **任务初始化**：应用启动时，ScheduleConfig会加载所有启用的定时任务并注册到调度器
2. **任务执行**：调度器根据Cron表达式定时执行任务，使用线程池异步执行
3. **任务管理**：通过前端页面可以新增、编辑、暂停、恢复、删除定时任务
4. **任务日志**：每次任务执行都会记录详细的执行日志，包括开始时间、结束时间、执行状态等
5. **节假日同步**：通过定时任务自动获取节假日信息并更新到数据库

### 1.3.3 线程池配置

- **任务执行线程池**：核心线程数5，最大线程数10，队列容量100
- **任务调度线程池**：线程池大小10，支持任务完成等待

### 1.3.4 循环依赖解决方案

**问题**：在定时任务管理系统中，存在以下循环依赖：
- ScheduleConfig 依赖 SysScheduleJobService
- SysScheduleJobService 依赖 ThreadPoolTaskExecutor
- ScheduleConfig 又直接创建和配置 ThreadPoolTaskExecutor

**解决方案**：
1. **创建独立的线程池配置类**：创建 ThreadPoolConfig 类，专门负责创建和配置线程池
2. **修改调度配置类**：修改 ScheduleConfig 类，移除直接创建线程池的代码，改为注入 ThreadPoolTaskScheduler
3. **修改定时任务服务**：修改 SysScheduleJobService 接口和实现，添加 executeJob 方法，用于执行具体的定时任务

**代码结构**：
```java
// ThreadPoolConfig.java
@Configuration
public class ThreadPoolConfig {
    @Bean
    public ThreadPoolTaskExecutor taskExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(5);
        executor.setMaxPoolSize(10);
        executor.setQueueCapacity(100);
        executor.setThreadNamePrefix("task-executor-");
        executor.setWaitForTasksToCompleteOnShutdown(true);
        executor.setAwaitTerminationSeconds(60);
        return executor;
    }

    @Bean
    public ThreadPoolTaskScheduler taskScheduler() {
        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();
        scheduler.setPoolSize(10);
        scheduler.setThreadNamePrefix("schedule-task-");
        scheduler.setWaitForTasksToCompleteOnShutdown(true);
        scheduler.setAwaitTerminationSeconds(60);
        return scheduler;
    }
}

// ScheduleConfig.java
@Configuration
@EnableScheduling
public class ScheduleConfig implements SchedulingConfigurer {
    @Autowired
    private SysScheduleJobService scheduleJobService;

    @Autowired
    private ThreadPoolTaskScheduler taskScheduler;

    // 存储定时任务的Map，用于后续的修改和删除操作
    private final Map<Long, ScheduledFuture<?>> scheduledTasks = new ConcurrentHashMap<>();

    @Override
    public void configureTasks(ScheduledTaskRegistrar registrar) {
        // 使用自定义的线程池
        registrar.setTaskScheduler(taskScheduler);

        // 初始化所有启用的定时任务
        List<SysScheduleJob> jobs = scheduleJobService.getEnabledJobs();
        for (SysScheduleJob job : jobs) {
            addTask(job, registrar);
        }
    }

    // 其他方法...
}

// SysScheduleJobService.java
public interface SysScheduleJobService extends IService<SysScheduleJob> {
    // 其他方法...
    void executeJob(SysScheduleJob job);
}

// SysScheduleJobServiceImpl.java
@Service
public class SysScheduleJobServiceImpl extends ServiceImpl<SysScheduleJobMapper, SysScheduleJob> implements SysScheduleJobService {
    @Autowired
    private SysScheduleLogService scheduleLogService;

    @Autowired
    private ThreadPoolTaskExecutor taskExecutor;

    @Autowired
    private HolidayTaskExecutor holidayTaskExecutor;

    // 其他方法...

    public void executeJob(SysScheduleJob job) {
        SysScheduleLog log = new SysScheduleLog();
        log.setJobId(job.getId());
        log.setJobName(job.getJobName());
        log.setJobGroup(job.getJobGroup());
        log.setJobCode(job.getJobCode());
        log.setParams(job.getParams());
        log.setStartTime(LocalDateTime.now());

        long startTime = System.currentTimeMillis();
        try {
            // 根据jobCode执行不同的任务
            if ("holidaySync".equals(job.getJobCode())) {
                // 执行节假日信息获取任务
                holidayTaskExecutor.execute();
            } else {
                // 这里可以通过反射调用具体的任务方法
                // 暂时只记录日志，后续可以扩展
                System.out.println("执行定时任务: " + job.getJobName() + "，参数: " + job.getParams());
            }
            log.setStatus(1);
        } catch (Exception e) {
            log.setStatus(0);
            log.setErrorMsg(e.getMessage());
            e.printStackTrace();
        } finally {
            log.setEndTime(LocalDateTime.now());
            log.setExecuteTime(System.currentTimeMillis() - startTime);
            scheduleLogService.save(log);
        }
    }
}
```

## 2. 开发环境搭建

### 2.1 前端开发环境

#### 2.1.1 安装Node.js
- 下载地址：https://nodejs.org/
- 版本要求：16.x或18.x
- 安装完成后，打开终端执行以下命令验证：
  ```
  node -v
  npm -v
  ```

#### 2.1.2 安装依赖
- 进入frontend目录：
  ```
  cd frontend
  ```
- 安装依赖：
  ```
  npm install
  ```

#### 2.1.3 启动开发服务器
```
npm run dev
```
- 访问地址：http://localhost:5173

#### 2.1.4 构建生产版本
```
npm run build
```
- 构建产物将输出到`dist`目录

### 2.2 后端开发环境

#### 2.2.1 安装JDK
- 版本要求：JDK 17
- 安装完成后，执行以下命令验证：
  ```
  java -version
  ```

#### 2.2.2 安装Maven
- 版本要求：Maven 3.8.x
- 下载地址：https://maven.apache.org/
- 安装完成后，执行以下命令验证：
  ```
  mvn -v
  ```

#### 2.2.3 安装MySQL
- 版本要求：MySQL 8.0+
- 下载地址：https://dev.mysql.com/downloads/
- 安装完成后，创建数据库：
  ```sql
  CREATE DATABASE hyper_duty CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
  ```

#### 2.2.4 初始化数据库
- 执行SQL脚本：
  ```
  mysql -u root -p hyper_duty < src/main/resources/sql/init.sql
  ```

#### 2.2.5 配置数据库连接
- 修改`src/main/resources/application.yml`文件：
  ```yaml
  spring:
    datasource:
      url: jdbc:mysql://localhost:3306/hyper_duty?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8
      username: root
      password: 123456
  ```

#### 2.2.6 启动后端服务
- 使用Maven命令启动：
  ```
  mvn spring-boot:run
  ```
- 或使用IDE（如IntelliJ IDEA）直接运行`HyperDutyApplication.java`类

#### 2.2.7 构建后端项目
```
mvn clean package
```
- 构建产物将输出到`target`目录

## 3. 代码结构详解

### 3.1 后端代码结构

#### 3.1.1 实体类（Entity）
- 位置：`src/main/java/com/lasu/hyperduty/entity/`
- 说明：对应数据库表结构，使用Lombok简化开发
- 示例：
  ```java
  @Data
  @TableName("sys_employee")
  public class SysEmployee implements Serializable {
      @TableId(value = "id", type = IdType.AUTO)
      private Long id;
      private String employeeName;
      private Long deptId;
      private String employeeCode;
      // ... 其他字段
  }
  ```

#### 3.1.2 数据传输对象（DTO）
- 位置：`src/main/java/com/lasu/hyperduty/dto/`
- 说明：用于前后端数据传输，避免直接暴露实体类
- 示例：
  ```java
  @Data
  public class LoginDTO {
      @NotBlank(message = "用户名不能为空")
      private String username;
      @NotBlank(message = "密码不能为空")
      private String password;
  }
  ```

#### 3.1.3 控制器（Controller）
- 位置：`src/main/java/com/lasu/hyperduty/controller/`
- 说明：处理HTTP请求，调用业务逻辑，返回响应结果
- 示例：
  ```java
  @RestController
  @RequestMapping("/employee")
  public class SysEmployeeController {
      @Autowired
      private SysEmployeeService sysEmployeeService;
      
      @GetMapping("/list")
      public ResponseResult<List<SysEmployee>> getAllEmployees() {
          List<SysEmployee> employeeList = sysEmployeeService.getAllEmployees();
          return ResponseResult.success(employeeList);
      }
      // ... 其他接口
  }
  ```

#### 3.1.4 服务层（Service）
- 位置：`src/main/java/com/lasu/hyperduty/service/`
- 说明：业务逻辑层，处理核心业务逻辑
- 示例：
  ```java
  public interface SysEmployeeService extends IService<SysEmployee> {
      List<SysEmployee> getAllEmployees();
  }
  
  @Service
  public class SysEmployeeServiceImpl extends ServiceImpl<SysEmployeeMapper, SysEmployee> implements SysEmployeeService {
      @Override
      public List<SysEmployee> getAllEmployees() {
          return baseMapper.selectList(null);
      }
  }
  ```

#### 3.1.5 持久层（Mapper）
- 位置：`src/main/java/com/lasu/hyperduty/mapper/`
- 说明：数据访问层，使用MyBatis Plus简化数据库操作
- 示例：
  ```java
  public interface SysEmployeeMapper extends BaseMapper<SysEmployee> {
      // 可以添加自定义SQL方法
  }
  ```

#### 3.1.6 安全配置（Security）
- 位置：`src/main/java/com/lasu/hyperduty/security/`
- 说明：Spring Security和JWT配置
- 主要文件：
  - `SecurityConfig.java`：Spring Security主配置
  - `JwtAuthenticationFilter.java`：JWT认证过滤器

#### 3.1.7 公共类（Common）
- 位置：`src/main/java/com/lasu/hyperduty/common/`
- 说明：公共工具类和通用响应结构
- 示例：
  ```java
  @Data
  @NoArgsConstructor
  @AllArgsConstructor
  public class ResponseResult<T> {
      private Integer code;
      private String message;
      private T data;
      
      public static <T> ResponseResult<T> success() {
          return new ResponseResult<>(200, "success", null);
      }
      
      public static <T> ResponseResult<T> success(T data) {
          return new ResponseResult<>(200, "success", data);
      }
      // ... 其他方法
  }
  ```

#### 3.1.8 数据传输对象（DTO）
- 位置：`src/main/java/com/lasu/hyperduty/dto/`
- 说明：用于前后端数据传输，避免直接暴露实体类，包含扩展信息
- 主要文件：
  - `LoginDTO.java`：登录请求数据传输对象
  - `UserVO.java`：用户信息返回对象，包含关联人员姓名

#### 3.1.9 用户管理控制器
- 位置：`src/main/java/com/lasu/hyperduty/controller/SysUserController.java`
- 说明：处理用户管理相关的HTTP请求，包括用户列表查询、添加、编辑、删除等
- 主要接口：
  - `GET /user/list`：获取用户列表
  - `POST /user`：添加用户
  - `PUT /user`：编辑用户
  - `DELETE /user/{id}`：删除用户

#### 3.1.10 用户管理服务
- 位置：`src/main/java/com/lasu/hyperduty/service/`
- 说明：实现用户管理的业务逻辑，包括用户信息查询、关联人员处理等
- 主要文件：
  - `SysUserService.java`：用户管理服务接口
  - `impl/SysUserServiceImpl.java`：用户管理服务实现类

### 3.2 前端代码结构

#### 3.2.1 页面组件（Views）
- 位置：`frontend/src/views/`
- 说明：系统的主要页面组件
- 主要文件：
  - `Login.vue`：登录页面
  - `Dashboard.vue`：仪表盘
  - `Dept.vue`：部门管理
  - `Employee.vue`：人员管理
  - `User.vue`：用户管理

#### 3.2.2 组件（Components）
- 位置：`frontend/src/components/`
- 说明：可复用的Vue组件
- 主要文件：
  - `Layout.vue`：布局组件
  - `HelloWorld.vue`：示例组件

#### 3.2.3 路由配置（Router）
- 位置：`frontend/src/router/index.js`
- 说明：配置系统路由
- 示例：
  ```javascript
  const router = createRouter({
    history: createWebHistory(),
    routes: [
      {
        path: '/login',
        name: 'Login',
        component: () => import('../views/Login.vue')
      },
      {
        path: '/',
        name: 'Layout',
        component: Layout,
        children: [
          {
            path: 'dashboard',
            name: 'Dashboard',
            component: () => import('../views/Dashboard.vue')
          },
          {
            path: 'employee',
            name: 'Employee',
            component: () => import('../views/Employee.vue')
          }
          // ... 其他路由
        ]
      }
    ]
  })
  ```

#### 3.2.4 API请求（Api）
- 位置：`frontend/src/api/`
- 说明：封装API请求，使用Axios发送HTTP请求
- 主要文件：
  - `auth.js`：认证相关API
  - `dept.js`：部门管理API
  - `employee.js`：人员管理API
  - `user.js`：用户管理API
- 示例（用户管理API）：
  ```javascript
  import request from '../utils/request'
  
  // 获取用户列表
export function getUserList() {
  return request({
    url: '/user/list',
    method: 'get'
  })
}

// 添加用户
export function addUser(data) {
  return request({
    url: '/user',
    method: 'post',
    data
  })
}

// 修改用户
export function updateUser(data) {
  return request({
    url: '/user',
    method: 'put',
    data
  })
}

// 删除用户
export function deleteUser(id) {
  return request({
    url: `/user/${id}`,
    method: 'delete'
  })
}
  ```

#### 3.2.5 状态管理（Stores）
- 位置：`frontend/src/stores/`
- 说明：使用Pinia进行状态管理
- 示例：
  ```javascript
  import { defineStore } from 'pinia'
  
export const useUserStore = defineStore('user', {
  state: () => ({
    username: '',
    token: ''
  }),
  
  getters: {
    isLoggedIn: (state) => !!state.token
  },
  
  actions: {
    setUserInfo(username, token) {
      this.username = username
      this.token = token
      localStorage.setItem('token', token)
    },
    logout() {
      this.username = ''
      this.token = ''
      localStorage.removeItem('token')
    }
  }
})
  ```

#### 3.2.6 工具函数（Utils）
- 位置：`frontend/src/utils/`
- 说明：通用工具函数
- 主要文件：
  - `request.js`：Axios拦截器配置

## 4. 开发规范

### 4.1 命名规范

#### 4.1.1 后端命名规范
- 类名：采用大驼峰命名法，如`SysEmployeeController`
- 方法名：采用小驼峰命名法，如`getAllEmployees`
- 变量名：采用小驼峰命名法，如`employeeName`
- 常量名：采用全大写，下划线分隔，如`MAX_PAGE_SIZE`
- 包名：采用小写字母，如`com.lasu.hyperduty.controller`
- 表名：采用小写字母，下划线分隔，如`sys_employee`
- 字段名：采用小写字母，下划线分隔，如`employee_name`

#### 4.1.2 前端命名规范
- 组件名：采用大驼峰命名法，如`Layout.vue`
- 变量名：采用小驼峰命名法，如`employeeForm`
- 常量名：采用全大写，下划线分隔，如`API_BASE_URL`
- 路由名：采用大驼峰命名法，如`Employee`
- 方法名：采用小驼峰命名法，如`handleSave`

### 4.2 代码风格

#### 4.2.1 后端代码风格
- 缩进：4个空格
- 换行：每行不超过120个字符
- 括号：左括号不换行，右括号换行
- 注释：
  - 类注释：使用Javadoc注释，说明类的功能
  - 方法注释：使用Javadoc注释，说明方法的功能、参数和返回值
  - 代码注释：对复杂逻辑进行注释

#### 4.2.2 前端代码风格
- 缩进：2个空格
- 换行：每行不超过120个字符
- 引号：HTML中使用双引号，JavaScript中使用单引号
- 注释：
  - 组件注释：使用Vue风格注释，说明组件的功能
  - 代码注释：对复杂逻辑进行注释

### 4.3 数据库设计规范

- 所有表必须包含`create_time`和`update_time`字段，用于记录数据的创建和更新时间
- 主键命名为`id`，使用`BIGINT`类型，自增
- 外键命名为`表名_id`，如`dept_id`
- 状态字段使用`tinyint`类型，0表示禁用，1表示启用
- 字符串字段使用`varchar`类型，根据实际需要设置合适的长度
- 日期时间字段使用`datetime`类型

## 5. API文档

### 5.1 认证API

#### 5.1.1 用户登录
- **URL**：`/api/auth/login`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "username": "admin",
    "password": "123456"
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "username": "admin",
      "employeeId": 1,
      "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    }
  }
  ```

#### 5.1.2 用户登出
- **URL**：`/api/auth/logout`
- **方法**：`POST`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

### 5.2 部门管理API

#### 5.2.1 获取部门列表
- **URL**：`/api/dept/list`
- **方法**：`GET`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [
      {
        "id": 1,
        "deptName": "总公司",
        "parentId": 0,
        "deptCode": "001",
        "sort": 1,
        "status": 1
      },
      // ... 其他部门
    ]
  }
  ```

#### 5.2.2 添加部门
- **URL**：`/api/dept`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "deptName": "技术部",
    "parentId": 1,
    "deptCode": "002",
    "sort": 2,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.2.3 编辑部门
- **URL**：`/api/dept`
- **方法**：`PUT`
- **请求体**：
  ```json
  {
    "id": 2,
    "deptName": "技术研发部",
    "parentId": 1,
    "deptCode": "002",
    "sort": 2,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.2.4 删除部门
- **URL**：`/api/dept/{id}`
- **方法**：`DELETE`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

### 5.3 人员管理API

#### 5.3.1 获取人员列表
- **URL**：`/api/employee/list`
- **方法**：`GET`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [
      {
        "id": 1,
        "employeeName": "管理员",
        "deptId": 1,
        "employeeCode": "EMP001",
        "phone": "13800138000",
        "email": "admin@example.com",
        "gender": 1,
        "status": 1
      },
      // ... 其他人员
    ]
  }
  ```

#### 5.3.2 添加人员
- **URL**：`/api/employee`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "employeeName": "张三",
    "deptId": 2,
    "employeeCode": "EMP002",
    "phone": "13800138001",
    "email": "zhangsan@example.com",
    "gender": 1,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.3.3 编辑人员
- **URL**：`/api/employee`
- **方法**：`PUT`
- **请求体**：
  ```json
  {
    "id": 2,
    "employeeName": "张三",
    "deptId": 2,
    "employeeCode": "EMP002",
    "phone": "13800138001",
    "email": "zhangsan@example.com",
    "gender": 1,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.3.4 删除人员
- **URL**：`/api/employee/{id}`
- **方法**：`DELETE`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

### 5.4 用户管理API

#### 5.4.1 获取用户列表
- **URL**：`/api/user/list`
- **方法**：`GET`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [
      {
        "id": 1,
        "username": "admin",
        "password": "$2a$10$...",
        "employeeId": 1,
        "employeeName": "管理员",
        "status": 1,
        "createTime": "2026-01-01T10:00:00",
        "updateTime": "2026-01-01T10:00:00"
      },
      // ... 其他用户
    ]
  }
  ```

#### 5.4.2 添加用户
- **URL**：`/api/user`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "username": "testuser",
    "password": "123456",
    "employeeId": 2,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.4.3 编辑用户
- **URL**：`/api/user`
- **方法**：`PUT`
- **请求体**：
  ```json
  {
    "id": 2,
    "username": "testuser",
    "password": "12345678",
    "employeeId": 2,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.4.4 删除用户
- **URL**：`/api/user/{id}`
- **方法**：`DELETE`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

### 5.5 角色管理API

#### 5.5.1 获取角色列表
- **URL**：`/api/role/list`
- **方法**：`GET`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [
      {
        "id": 1,
        "roleName": "管理员",
        "roleCode": "ADMIN",
        "status": 1,
        "createTime": "2026-01-01T10:00:00",
        "updateTime": "2026-01-01T10:00:00"
      },
      // ... 其他角色
    ]
  }
  ```

#### 5.5.2 添加角色
- **URL**：`/api/role`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "roleName": "测试角色",
    "roleCode": "TEST",
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.5.3 编辑角色
- **URL**：`/api/role`
- **方法**：`PUT`
- **请求体**：
  ```json
  {
    "id": 2,
    "roleName": "测试角色",
    "roleCode": "TEST",
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.5.4 删除角色
- **URL**：`/api/role/{id}`
- **方法**：`DELETE`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.5.5 获取角色菜单
- **URL**：`/api/role/menu/{roleId}`
- **方法**：`GET`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [1, 2, 3, 4]
  }
  ```

#### 5.5.6 保存角色菜单
- **URL**：`/api/role/menu`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "roleId": 1,
    "menuIds": [1, 2, 3, 4]
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.5.7 获取角色用户
- **URL**：`/api/role/user/{roleId}`
- **方法**：`GET`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [1, 2, 3]
  }
  ```

#### 5.5.8 保存角色用户
- **URL**：`/api/role/user`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "roleId": 1,
    "userIds": [1, 2, 3]
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

### 5.6 菜单管理API

#### 5.6.1 获取菜单列表
- **URL**：`/api/menu/list`
- **方法**：`GET`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [
      {
        "id": 1,
        "menuName": "系统管理",
        "parentId": 0,
        "path": "/system",
        "component": "Layout",
        "menuType": "M",
        "perms": "",
        "icon": "system",
        "orderNum": 1,
        "status": 1
      },
      // ... 其他菜单
    ]
  }
  ```

#### 5.6.2 获取菜单树
- **URL**：`/api/menu/tree`
- **方法**：`GET`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [
      {
        "id": 1,
        "menuName": "系统管理",
        "parentId": 0,
        "children": [
          {
            "id": 2,
            "menuName": "部门管理",
            "parentId": 1,
            "children": []
          },
          // ... 其他子菜单
        ]
      }
    ]
  }
  ```

#### 5.6.3 添加菜单
- **URL**：`/api/menu`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "menuName": "测试菜单",
    "parentId": 1,
    "path": "/test",
    "component": "Test.vue",
    "menuType": "C",
    "perms": "test:view",
    "icon": "test",
    "orderNum": 5,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.6.4 编辑菜单
- **URL**：`/api/menu`
- **方法**：`PUT`
- **请求体**：
  ```json
  {
    "id": 3,
    "menuName": "测试菜单",
    "parentId": 1,
    "path": "/test",
    "component": "Test.vue",
    "menuType": "C",
    "perms": "test:view",
    "icon": "test",
    "orderNum": 5,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.6.5 删除菜单
- **URL**：`/api/menu/{id}`
- **方法**：`DELETE`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

### 5.7 操作日志API

#### 5.7.1 获取操作日志列表
- **URL**：`/api/operation-log/list`
- **方法**：`GET`
- **参数**：
  - `operatorName`：操作人姓名（可选）
  - `operationType`：操作类型（可选）
  - `operationModule`：操作模块（可选）
  - `startTime`：开始时间（可选）
  - `endTime`：结束时间（可选）
  - `pageNum`：页码（可选，默认1）
  - `pageSize`：每页大小（可选，默认10）
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 100,
      "rows": [
        {
          "id": 1,
          "operatorId": 1,
          "operatorName": "管理员",
          "operationType": "登录",
          "operationModule": "系统管理",
          "operationDesc": "用户登录",
          "requestMethod": "POST",
          "requestUrl": "/api/auth/login",
          "requestParams": "{\"username\":\"admin\",\"password\":\"***\"}",
          "responseResult": "{\"code\":200,\"message\":\"success\",\"data\":{...}}",
          "ipAddress": "127.0.0.1",
          "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
          "executionTime": 123,
          "status": 1,
          "errorMsg": null,
          "createTime": "2026-01-01T10:00:00"
        },
        // ... 其他日志
      ]
    }
  }
  ```

### 5.8 定时任务API

#### 5.8.1 获取定时任务列表
- **URL**：`/api/schedule-job/list`
- **方法**：`GET`
- **参数**：
  - `jobName`：任务名称（可选）
  - `jobGroup`：任务分组（可选）
  - `status`：状态（可选）
  - `pageNum`：页码（可选，默认1）
  - `pageSize`：每页大小（可选，默认10）
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 10,
      "rows": [
        {
          "id": 1,
          "jobName": "节假日信息同步",
          "jobGroup": "system",
          "jobCode": "holidaySync",
          "cronExpression": "0 0 0 1 * ?",
          "beanName": "holidayTaskExecutor",
          "methodName": "syncHolidayInfo",
          "params": "",
          "status": 1,
          "concurrent": 0,
          "description": "每月1日同步节假日信息",
          "createTime": "2026-01-01T10:00:00",
          "updateTime": "2026-01-01T10:00:00"
        },
        // ... 其他任务
      ]
    }
  }
  ```

#### 5.8.2 添加定时任务
- **URL**：`/api/schedule-job`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "jobName": "测试任务",
    "jobGroup": "test",
    "jobCode": "testJob",
    "cronExpression": "0 0/5 * * * ?",
    "beanName": "testTaskExecutor",
    "methodName": "execute",
    "params": "{\"param1\":\"value1\"}",
    "status": 1,
    "concurrent": 0,
    "description": "测试定时任务"
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.8.3 更新定时任务
- **URL**：`/api/schedule-job`
- **方法**：`PUT`
- **请求体**：
  ```json
  {
    "id": 1,
    "jobName": "节假日信息同步",
    "jobGroup": "system",
    "jobCode": "holidaySync",
    "cronExpression": "0 0 0 1 * ?",
    "beanName": "holidayTaskExecutor",
    "methodName": "syncHolidayInfo",
    "params": "",
    "status": 1,
    "concurrent": 0,
    "description": "每月1日同步节假日信息"
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.8.4 删除定时任务
- **URL**：`/api/schedule-job/{id}`
- **方法**：`DELETE`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.8.5 暂停定时任务
- **URL**：`/api/schedule-job/pause/{id}`
- **方法**：`PUT`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.8.6 启用定时任务
- **URL**：`/api/schedule-job/resume/{id}`
- **方法**：`PUT`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.8.7 立即执行定时任务
- **URL**：`/api/schedule-job/run/{id}`
- **方法**：`PUT`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.8.8 获取定时任务日志
- **URL**：`/api/schedule-job/logs/{jobId}`
- **方法**：`GET`
- **参数**：
  - `jobId`：任务ID
  - `pageNum`：页码（可选，默认1）
  - `pageSize`：每页大小（可选，默认10）
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 5,
      "rows": [
        {
          "id": 1,
          "jobId": 1,
          "jobName": "节假日信息同步",
          "jobGroup": "system",
          "jobCode": "holidaySync",
          "params": "",
          "status": 1,
          "errorMsg": null,
          "executeTime": 1234,
          "startTime": "2026-01-01T00:00:00",
          "endTime": "2026-01-01T00:00:01",
          "createTime": "2026-01-01T00:00:01"
        },
        // ... 其他日志
      ]
    }
  }
  ```

#### 5.8.9 清理定时任务日志
- **URL**：`/api/schedule-job/logs/clean`
- **方法**：`DELETE`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

## 6. 开发流程

### 6.1 需求分析
- 理解需求，明确功能边界
- 分析业务流程，绘制流程图
- 设计数据模型，绘制ER图

### 6.2 后端开发
- 创建实体类（Entity）
- 创建Mapper接口
- 创建Service接口和实现类
- 创建Controller接口
- 编写单元测试

### 6.3 前端开发
- 创建页面组件（Views）
- 配置路由
- 封装API请求
- 实现页面逻辑和交互
- 编写单元测试

### 6.4 测试
- 单元测试：测试单个组件或函数
- 集成测试：测试多个组件或服务的协同工作
- 系统测试：测试整个系统的功能和性能
- 回归测试：确保修改不会引入新的问题

### 6.5 部署
- 构建前端项目
- 构建后端项目
- 部署到测试环境
- 进行UAT测试
- 部署到生产环境

## 7. 常见问题及解决方案

### 7.1 跨域问题
- 问题：前端访问后端API时出现跨域错误
- 解决方案：Spring Boot已配置CORS，允许所有来源的请求

### 7.2 JWT令牌失效
- 问题：请求时出现令牌失效错误
- 解决方案：重新登录获取新的令牌

### 7.3 数据库连接失败
- 问题：后端启动时无法连接数据库
- 解决方案：
  1. 检查数据库是否正常运行
  2. 检查数据库连接配置是否正确
  3. 检查数据库用户权限

### 7.4 前端依赖安装失败
- 问题：npm install时出现依赖安装失败
- 解决方案：
  1. 清除npm缓存：`npm cache clean --force`
  2. 删除node_modules目录和package-lock.json文件
  3. 重新安装依赖：`npm install`

### 7.5 用户密码加密问题
- 问题：用户密码存储为明文
- 解决方案：后端服务已在`SysUserServiceImpl`中实现了密码加密，使用BCrypt算法，加密逻辑如下：
  ```java
  @Override
  public boolean save(SysUser sysUser) {
      if (sysUser.getPassword() != null && !sysUser.getPassword().startsWith("$2a$")) {
          sysUser.setPassword(passwordEncoder.encode(sysUser.getPassword()));
      }
      return super.save(sysUser);
  }
  ```

### 7.6 循环依赖问题
- 问题：启动后端服务时出现循环依赖错误
- 解决方案：
  1. 避免使用构造函数注入，改用方法参数注入
  2. 移除不必要的依赖注入
  3. 重构代码结构，打破循环依赖链
  4. 在`SecurityConfig`中，将对`JwtAuthenticationFilter`的字段注入改为方法参数注入

### 7.7 用户管理中的人员关联问题
- 问题：无法正确关联用户和人员
- 解决方案：
  1. 确保人员ID存在于`sys_employee`表中
  2. 确保人员ID未被其他用户关联（`sys_user.employee_id`字段唯一）
  3. 检查前端表单验证逻辑，确保人员选择正确

### 7.8 人员编码非必填配置
- 问题：人员编码无法设为非必填
- 解决方案：
  1. 数据库表中已将`employee_code`字段改为允许为空
  2. 前端验证规则中已将`employeeCode`的`required`属性设为`false`
  3. 后端接口已支持人员编码为空的情况

### 7.9 JWT密钥安全问题
- 问题：启动后端服务时出现`WeakKeyException`，提示密钥长度不够安全
- 解决方案：
  1. 使用`Keys.secretKeyFor(SignatureAlgorithm.HS512)`生成安全的随机密钥
  2. 确保密钥长度符合算法要求（HS512要求至少512位）
  3. 避免使用固定字符串作为密钥，防止密钥泄露

### 7.10 统一响应处理
- 问题：不同组件中的响应处理代码重复、格式不统一
- 解决方案：
  1. 使用`ResponseUtil`工具类统一处理HTTP响应
  2. 提供多种响应方法，包括：
     - `sendJsonResponse`：发送JSON响应
     - `sendErrorResponse`：发送错误响应
     - `sendUnauthorizedResponse`：发送未授权响应
     - `sendInternalErrorResponse`：发送服务器内部错误响应
     - `sendNotFoundResponse`：发送资源不存在响应
     - `sendForbiddenResponse`：发送禁止访问响应
  3. 所有响应都使用`ResponseResult`格式，确保统一

## 8. 最佳实践

### 8.1 密码管理
- 始终使用BCrypt等安全算法加密存储密码
- 避免在日志中输出密码信息
- 建议设置密码复杂度规则
- 定期提示用户更换密码

### 8.2 用户与人员关联
- 一个用户只能关联一个人员
- 一个人员只能关联一个用户
- 删除用户时，建议解除与人员的关联
- 删除人员前，建议先删除关联的用户

### 8.3 系统安全
- 定期更新JWT密钥
- 限制JWT令牌的有效期
- 实现令牌刷新机制
- 定期审计用户登录日志
- 使用安全的随机密钥生成方式，避免使用弱密钥
- 确保JWT密钥长度符合算法要求（HS512要求至少512位）

### 8.4 代码优化
- 使用MyBatis Plus的Lambda表达式简化查询
- 合理使用缓存，减少数据库查询次数
- 实现分页查询，避免一次性返回大量数据
- 优化SQL查询，避免全表扫描
- 使用统一的响应处理工具类，避免重复代码
- 保持响应格式的一致性，提高API的易用性

### 8.5 前端开发
- 使用组件化开发，提高代码复用性
- 实现表单验证，确保数据完整性
- 使用Pinia管理状态，避免组件间状态混乱
- 实现路由守卫，控制页面访问权限
- 在请求拦截器中检查JWT令牌有效性
- 处理响应错误，实现统一的错误提示
- 页面刷新时验证JWT令牌，无效则跳转到登录页

## 9. 附录

### 9.1 常用命令

#### 9.1.1 后端常用命令
```bash
# 启动后端服务
mvn spring-boot:run

# 构建后端项目
mvn clean package

# 运行单元测试
mvn test
```

#### 9.1.2 前端常用命令
```bash
# 启动前端开发服务器
npm run dev

# 构建前端项目
npm run build

# 预览构建产物
npm run preview
```

### 9.2 开发工具推荐

| 工具 | 用途 | 推荐版本 |
|------|------|----------|
| IntelliJ IDEA | Java开发IDE | 2023.x |
| VS Code | 前端开发IDE | 最新版 |
| Navicat | 数据库管理工具 | 16.x |
| Postman | API测试工具 | 最新版 |
| Git | 版本控制工具 | 2.30.x |

### 9.3 参考文档

- [Spring Boot官方文档](https://docs.spring.io/spring-boot/docs/3.1.0/reference/htmlsingle/)
- [Vue 3官方文档](https://vuejs.org/guide/introduction.html)
- [MyBatis Plus官方文档](https://baomidou.com/guide/)
- [Element Plus官方文档](https://element-plus.org/zh-CN/)
- [Spring Security官方文档](https://docs.spring.io/spring-security/reference/index.html)
- [JWT官方文档](https://jwt.io/introduction/)

---

**文档版本**：1.4
**创建日期**：2026-01-11
**更新日期**：2026-01-11
**文档作者**：系统生成
