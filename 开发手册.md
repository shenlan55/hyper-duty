# Hyper Duty 开发手册

## 1. 项目概述

Hyper Duty是一个基于前后端分离架构的企业级人员管理系统，使用Spring Boot 3.x + Vue 3开发，提供部门管理、人员管理和用户认证等功能。

### 1.1 技术栈

| 分类 | 技术 | 版本 | 说明 |
|------|------|------|------|
| 后端框架 | Spring Boot | 3.1.0 | 企业级Java开发框架 |
| 前端框架 | Vue | 3.5.24 | 渐进式JavaScript框架 |
| 持久层 | MyBatis Plus | 3.5.6 | MyBatis增强工具 |
| 数据库 | MySQL | 8.0+ | 关系型数据库 |
| 安全框架 | Spring Security | 6.1.0 | 安全认证授权框架 |
| 认证方式 | JWT | 0.12.5 | JSON Web Token |
| UI组件库 | Element Plus | 2.13.1 | Vue 3 UI组件库 |
| 构建工具 | Maven | 3.8.x | Java项目构建工具 |
| 前端构建 | Vite | 4.5.0 | 下一代前端构建工具 |
| HTTP客户端 | Axios | 1.13.2 | 基于Promise的HTTP客户端 |

### 1.2 项目结构

```
hyper-duty/
├── frontend/             # 前端项目
│   ├── src/              # 前端源代码
│   │   ├── api/          # API请求封装
│   │   ├── components/   # Vue组件
│   │   ├── router/       # 路由配置
│   │   ├── stores/       # Pinia状态管理
│   │   ├── utils/        # 工具函数
│   │   ├── views/        # 页面组件
│   │   ├── App.vue       # 根组件
│   │   └── main.js       # 入口文件
│   ├── package.json      # 前端依赖配置
│   └── vite.config.js    # Vite配置
└── src/                  # 后端项目
    └── main/             # 后端源代码
        ├── java/         # Java代码
        │   └── com/lasu/hyperduty/
        │       ├── common/       # 公共类
        │       ├── controller/   # 控制器
        │       ├── dto/          # 数据传输对象
        │       ├── entity/       # 实体类
        │       ├── mapper/       # MyBatis映射器
        │       ├── security/     # 安全配置
        │       ├── service/      # 业务逻辑
        │       │   └── impl/     # 业务逻辑实现
        │       └── utils/        # 工具类
        └── resources/    # 资源文件
            ├── mapper/   # MyBatis XML映射文件
            ├── sql/      # SQL脚本
            └── application.yml   # 应用配置
```

## 2. 开发环境搭建

### 2.1 前端开发环境

#### 2.1.1 安装Node.js
- 下载地址：https://nodejs.org/
- 版本要求：16.x或18.x
- 安装完成后，打开终端执行以下命令验证：
  ```
  node -v
  npm -v
  ```

#### 2.1.2 安装依赖
- 进入frontend目录：
  ```
  cd frontend
  ```
- 安装依赖：
  ```
  npm install
  ```

#### 2.1.3 启动开发服务器
```
npm run dev
```
- 访问地址：http://localhost:5173

#### 2.1.4 构建生产版本
```
npm run build
```
- 构建产物将输出到`dist`目录

### 2.2 后端开发环境

#### 2.2.1 安装JDK
- 版本要求：JDK 17
- 安装完成后，执行以下命令验证：
  ```
  java -version
  ```

#### 2.2.2 安装Maven
- 版本要求：Maven 3.8.x
- 下载地址：https://maven.apache.org/
- 安装完成后，执行以下命令验证：
  ```
  mvn -v
  ```

#### 2.2.3 安装MySQL
- 版本要求：MySQL 8.0+
- 下载地址：https://dev.mysql.com/downloads/
- 安装完成后，创建数据库：
  ```sql
  CREATE DATABASE hyper_duty CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
  ```

#### 2.2.4 初始化数据库
- 执行SQL脚本：
  ```
  mysql -u root -p hyper_duty < src/main/resources/sql/init.sql
  ```

#### 2.2.5 配置数据库连接
- 修改`src/main/resources/application.yml`文件：
  ```yaml
  spring:
    datasource:
      url: jdbc:mysql://localhost:3306/hyper_duty?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8
      username: root
      password: 123456
  ```

#### 2.2.6 启动后端服务
- 使用Maven命令启动：
  ```
  mvn spring-boot:run
  ```
- 或使用IDE（如IntelliJ IDEA）直接运行`HyperDutyApplication.java`类

#### 2.2.7 构建后端项目
```
mvn clean package
```
- 构建产物将输出到`target`目录

## 3. 代码结构详解

### 3.1 后端代码结构

#### 3.1.1 实体类（Entity）
- 位置：`src/main/java/com/lasu/hyperduty/entity/`
- 说明：对应数据库表结构，使用Lombok简化开发
- 示例：
  ```java
  @Data
  @TableName("sys_employee")
  public class SysEmployee implements Serializable {
      @TableId(value = "id", type = IdType.AUTO)
      private Long id;
      private String employeeName;
      private Long deptId;
      private String employeeCode;
      // ... 其他字段
  }
  ```

#### 3.1.2 数据传输对象（DTO）
- 位置：`src/main/java/com/lasu/hyperduty/dto/`
- 说明：用于前后端数据传输，避免直接暴露实体类
- 示例：
  ```java
  @Data
  public class LoginDTO {
      @NotBlank(message = "用户名不能为空")
      private String username;
      @NotBlank(message = "密码不能为空")
      private String password;
  }
  ```

#### 3.1.3 控制器（Controller）
- 位置：`src/main/java/com/lasu/hyperduty/controller/`
- 说明：处理HTTP请求，调用业务逻辑，返回响应结果
- 示例：
  ```java
  @RestController
  @RequestMapping("/employee")
  public class SysEmployeeController {
      @Autowired
      private SysEmployeeService sysEmployeeService;
      
      @GetMapping("/list")
      public ResponseResult<List<SysEmployee>> getAllEmployees() {
          List<SysEmployee> employeeList = sysEmployeeService.getAllEmployees();
          return ResponseResult.success(employeeList);
      }
      // ... 其他接口
  }
  ```

#### 3.1.4 服务层（Service）
- 位置：`src/main/java/com/lasu/hyperduty/service/`
- 说明：业务逻辑层，处理核心业务逻辑
- 示例：
  ```java
  public interface SysEmployeeService extends IService<SysEmployee> {
      List<SysEmployee> getAllEmployees();
  }
  
  @Service
  public class SysEmployeeServiceImpl extends ServiceImpl<SysEmployeeMapper, SysEmployee> implements SysEmployeeService {
      @Override
      public List<SysEmployee> getAllEmployees() {
          return baseMapper.selectList(null);
      }
  }
  ```

#### 3.1.5 持久层（Mapper）
- 位置：`src/main/java/com/lasu/hyperduty/mapper/`
- 说明：数据访问层，使用MyBatis Plus简化数据库操作
- 示例：
  ```java
  public interface SysEmployeeMapper extends BaseMapper<SysEmployee> {
      // 可以添加自定义SQL方法
  }
  ```

#### 3.1.6 安全配置（Security）
- 位置：`src/main/java/com/lasu/hyperduty/security/`
- 说明：Spring Security和JWT配置
- 主要文件：
  - `SecurityConfig.java`：Spring Security主配置
  - `JwtAuthenticationFilter.java`：JWT认证过滤器

#### 3.1.7 公共类（Common）
- 位置：`src/main/java/com/lasu/hyperduty/common/`
- 说明：公共工具类和通用响应结构
- 示例：
  ```java
  @Data
  @NoArgsConstructor
  @AllArgsConstructor
  public class ResponseResult<T> {
      private Integer code;
      private String message;
      private T data;
      
      public static <T> ResponseResult<T> success() {
          return new ResponseResult<>(200, "success", null);
      }
      
      public static <T> ResponseResult<T> success(T data) {
          return new ResponseResult<>(200, "success", data);
      }
      // ... 其他方法
  }
  ```

### 3.2 前端代码结构

#### 3.2.1 页面组件（Views）
- 位置：`frontend/src/views/`
- 说明：系统的主要页面组件
- 主要文件：
  - `Login.vue`：登录页面
  - `Dashboard.vue`：仪表盘
  - `Dept.vue`：部门管理
  - `Employee.vue`：人员管理

#### 3.2.2 组件（Components）
- 位置：`frontend/src/components/`
- 说明：可复用的Vue组件
- 主要文件：
  - `Layout.vue`：布局组件
  - `HelloWorld.vue`：示例组件

#### 3.2.3 路由配置（Router）
- 位置：`frontend/src/router/index.js`
- 说明：配置系统路由
- 示例：
  ```javascript
  const router = createRouter({
    history: createWebHistory(),
    routes: [
      {
        path: '/login',
        name: 'Login',
        component: () => import('../views/Login.vue')
      },
      {
        path: '/',
        name: 'Layout',
        component: Layout,
        children: [
          {
            path: 'dashboard',
            name: 'Dashboard',
            component: () => import('../views/Dashboard.vue')
          },
          {
            path: 'employee',
            name: 'Employee',
            component: () => import('../views/Employee.vue')
          }
          // ... 其他路由
        ]
      }
    ]
  })
  ```

#### 3.2.4 API请求（Api）
- 位置：`frontend/src/api/`
- 说明：封装API请求，使用Axios发送HTTP请求
- 示例：
  ```javascript
  import request from '../utils/request'
  
  // 获取人员列表
export function getEmployeeList() {
  return request({
    url: '/employee/list',
    method: 'get'
  })
}
  ```

#### 3.2.5 状态管理（Stores）
- 位置：`frontend/src/stores/`
- 说明：使用Pinia进行状态管理
- 示例：
  ```javascript
  import { defineStore } from 'pinia'
  
export const useUserStore = defineStore('user', {
  state: () => ({
    username: '',
    token: ''
  }),
  
  getters: {
    isLoggedIn: (state) => !!state.token
  },
  
  actions: {
    setUserInfo(username, token) {
      this.username = username
      this.token = token
      localStorage.setItem('token', token)
    },
    logout() {
      this.username = ''
      this.token = ''
      localStorage.removeItem('token')
    }
  }
})
  ```

#### 3.2.6 工具函数（Utils）
- 位置：`frontend/src/utils/`
- 说明：通用工具函数
- 主要文件：
  - `request.js`：Axios拦截器配置

## 4. 开发规范

### 4.1 命名规范

#### 4.1.1 后端命名规范
- 类名：采用大驼峰命名法，如`SysEmployeeController`
- 方法名：采用小驼峰命名法，如`getAllEmployees`
- 变量名：采用小驼峰命名法，如`employeeName`
- 常量名：采用全大写，下划线分隔，如`MAX_PAGE_SIZE`
- 包名：采用小写字母，如`com.lasu.hyperduty.controller`
- 表名：采用小写字母，下划线分隔，如`sys_employee`
- 字段名：采用小写字母，下划线分隔，如`employee_name`

#### 4.1.2 前端命名规范
- 组件名：采用大驼峰命名法，如`Layout.vue`
- 变量名：采用小驼峰命名法，如`employeeForm`
- 常量名：采用全大写，下划线分隔，如`API_BASE_URL`
- 路由名：采用大驼峰命名法，如`Employee`
- 方法名：采用小驼峰命名法，如`handleSave`

### 4.2 代码风格

#### 4.2.1 后端代码风格
- 缩进：4个空格
- 换行：每行不超过120个字符
- 括号：左括号不换行，右括号换行
- 注释：
  - 类注释：使用Javadoc注释，说明类的功能
  - 方法注释：使用Javadoc注释，说明方法的功能、参数和返回值
  - 代码注释：对复杂逻辑进行注释

#### 4.2.2 前端代码风格
- 缩进：2个空格
- 换行：每行不超过120个字符
- 引号：HTML中使用双引号，JavaScript中使用单引号
- 注释：
  - 组件注释：使用Vue风格注释，说明组件的功能
  - 代码注释：对复杂逻辑进行注释

### 4.3 数据库设计规范

- 所有表必须包含`create_time`和`update_time`字段，用于记录数据的创建和更新时间
- 主键命名为`id`，使用`BIGINT`类型，自增
- 外键命名为`表名_id`，如`dept_id`
- 状态字段使用`tinyint`类型，0表示禁用，1表示启用
- 字符串字段使用`varchar`类型，根据实际需要设置合适的长度
- 日期时间字段使用`datetime`类型

## 5. API文档

### 5.1 认证API

#### 5.1.1 用户登录
- **URL**：`/api/auth/login`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "username": "admin",
    "password": "123456"
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "username": "admin",
      "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    }
  }
  ```

#### 5.1.2 用户登出
- **URL**：`/api/auth/logout`
- **方法**：`POST`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

### 5.2 部门管理API

#### 5.2.1 获取部门列表
- **URL**：`/api/dept/list`
- **方法**：`GET`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [
      {
        "id": 1,
        "deptName": "总公司",
        "parentId": 0,
        "deptCode": "001",
        "sort": 1,
        "status": 1
      },
      // ... 其他部门
    ]
  }
  ```

#### 5.2.2 添加部门
- **URL**：`/api/dept`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "deptName": "技术部",
    "parentId": 1,
    "deptCode": "002",
    "sort": 2,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.2.3 编辑部门
- **URL**：`/api/dept`
- **方法**：`PUT`
- **请求体**：
  ```json
  {
    "id": 2,
    "deptName": "技术研发部",
    "parentId": 1,
    "deptCode": "002",
    "sort": 2,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.2.4 删除部门
- **URL**：`/api/dept/{id}`
- **方法**：`DELETE`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

### 5.3 人员管理API

#### 5.3.1 获取人员列表
- **URL**：`/api/employee/list`
- **方法**：`GET`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [
      {
        "id": 1,
        "employeeName": "管理员",
        "deptId": 1,
        "employeeCode": "EMP001",
        "phone": "13800138000",
        "email": "admin@example.com",
        "gender": 1,
        "status": 1
      },
      // ... 其他人员
    ]
  }
  ```

#### 5.3.2 添加人员
- **URL**：`/api/employee`
- **方法**：`POST`
- **请求体**：
  ```json
  {
    "employeeName": "张三",
    "deptId": 2,
    "employeeCode": "EMP002",
    "phone": "13800138001",
    "email": "zhangsan@example.com",
    "gender": 1,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.3.3 编辑人员
- **URL**：`/api/employee`
- **方法**：`PUT`
- **请求体**：
  ```json
  {
    "id": 2,
    "employeeName": "张三",
    "deptId": 2,
    "employeeCode": "EMP002",
    "phone": "13800138001",
    "email": "zhangsan@example.com",
    "gender": 1,
    "status": 1
  }
  ```
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

#### 5.3.4 删除人员
- **URL**：`/api/employee/{id}`
- **方法**：`DELETE`
- **响应**：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": null
  }
  ```

## 5. 开发流程

### 5.1 需求分析
- 理解需求，明确功能边界
- 分析业务流程，绘制流程图
- 设计数据模型，绘制ER图

### 5.2 后端开发
- 创建实体类（Entity）
- 创建Mapper接口
- 创建Service接口和实现类
- 创建Controller接口
- 编写单元测试

### 5.3 前端开发
- 创建页面组件（Views）
- 配置路由
- 封装API请求
- 实现页面逻辑和交互
- 编写单元测试

### 5.4 测试
- 单元测试：测试单个组件或函数
- 集成测试：测试多个组件或服务的协同工作
- 系统测试：测试整个系统的功能和性能
- 回归测试：确保修改不会引入新的问题

### 5.5 部署
- 构建前端项目
- 构建后端项目
- 部署到测试环境
- 进行UAT测试
- 部署到生产环境

## 6. 常见问题及解决方案

### 6.1 跨域问题
- 问题：前端访问后端API时出现跨域错误
- 解决方案：Spring Boot已配置CORS，允许所有来源的请求

### 6.2 JWT令牌失效
- 问题：请求时出现令牌失效错误
- 解决方案：重新登录获取新的令牌

### 6.3 数据库连接失败
- 问题：后端启动时无法连接数据库
- 解决方案：
  1. 检查数据库是否正常运行
  2. 检查数据库连接配置是否正确
  3. 检查数据库用户权限

### 6.4 前端依赖安装失败
- 问题：npm install时出现依赖安装失败
- 解决方案：
  1. 清除npm缓存：`npm cache clean --force`
  2. 删除node_modules目录和package-lock.json文件
  3. 重新安装依赖：`npm install`

## 7. 附录

### 7.1 常用命令

#### 7.1.1 后端常用命令
```bash
# 启动后端服务
mvn spring-boot:run

# 构建后端项目
mvn clean package

# 运行单元测试
mvn test
```

#### 7.1.2 前端常用命令
```bash
# 启动前端开发服务器
npm run dev

# 构建前端项目
npm run build

# 预览构建产物
npm run preview
```

### 7.2 开发工具推荐

| 工具 | 用途 | 推荐版本 |
|------|------|----------|
| IntelliJ IDEA | Java开发IDE | 2023.x |
| VS Code | 前端开发IDE | 最新版 |
| Navicat | 数据库管理工具 | 16.x |
| Postman | API测试工具 | 最新版 |
| Git | 版本控制工具 | 2.30.x |

### 7.3 参考文档

- [Spring Boot官方文档](https://docs.spring.io/spring-boot/docs/3.1.0/reference/htmlsingle/)
- [Vue 3官方文档](https://vuejs.org/guide/introduction.html)
- [MyBatis Plus官方文档](https://baomidou.com/guide/)
- [Element Plus官方文档](https://element-plus.org/zh-CN/)
- [Spring Security官方文档](https://docs.spring.io/spring-security/reference/index.html)
- [JWT官方文档](https://jwt.io/introduction/)

---

**文档版本**：1.0
**创建日期**：2026-01-11
**更新日期**：2026-01-11
**文档作者**：系统生成
